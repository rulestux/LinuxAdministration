## 102.5 RedHat Package Management
__weight 3__


### RPM Package Manager
- ferramenta essencial de sistemas RedHat e derivados; equivale ao dpkg do Debian;
- __opções:__
	- '-i' instala o pacote fornecido a seguir;
	- '-v' verbose - detalha o processo;
	- '-h' exibe uma barra de cerquilhas, representando o progresso do processo; 
	- '-ivh' são frequentemente utilizados em conjunto;
	- '-U' se existir uma versão anterior no sistema, atualiza para a mais recente;
	- '-F' se caso usando '-U', só exista a versão recente, em vez de uma antiga, evita que uma nova cópia do mesmo pacote seja instalada;
	- '-e' erase - desinstala um pacote fornecido na sequência;
- __opções modo query:__
	- '-qa' query all - lista todos os pacotes instalados no sistema;
	- '-qi' query info - lista informações sobre um pacote *instalado*;
	- '-ql' query list - lista os arquivos que estão dentro de um pacote *instalado*;
	- '-qip' lista informações sobre um pacote que ainda *não* foi instalado;
	- '-qlp' lista os arquivos que estão dentro de um pacote que ainda *não* foi instalado;
	- '-qf /path/to/file' query file - retorna o pacote instalado que possui um arquivo fornecido;

### YellowDog Updater Modified *YUM*
- ferramenta capaz de resolver dependências e com outros recursos; equivale ao 'apt-get' do Debian;
- __parâmetros e opções:__
	- 'search' retorna os pacotes que possuem nome ou descrição contendo algum padrão fornecido na sequência;
	- 'install' instala um ou mais pacotes fornecidos na sequência;
	- 'update' atualiza o pacote fornecido ou todos os pacotes com atualização disponível, caso nenhum pacote seja fornecido;
	- 'check-update' verifica se há atualizações para um pacote fornecido ou para todo o sistema, como acima;
	- 'remove' ou 'erase' remove um pacote instalado fornecido;
	- 'whatprovides' retorna o nome do pacote que provê determinado arquivo fornecido a seguir;
	- 'info' retorna informações sobre um pacote;
	- 'deplist' lista as dependências de um pacote;
	- 'repolist' lista repositórios configurados ativos;
	- 'localinstall' realiza instalação local de pacotes resolvendo suas dependências;
	- 'groupinstall' e 'groupremove' instala e remove grupos de pacotes, respectivamente.
	
### YUM repositories
- os repositórios usados pelo yum ficam listados no diretório '/etc/yum.repos.d/';
- cada repositório é representado por um arquivo '\*.repo', como 'CentOS-Base.repo';
	- o conteúdo dos arquivos '\*.repo' segue o padrão:
```
[nome_do_repositório]
name= Nome descritivo do repositório
baseurl=url://endereço/para/o/repositório
```
- pode-se adicionar repositórios criando novos arquivos '\*.repo' 
- o arquivo '/etc/yum.conf' contém diversas configurações e também pode conter repositórios; 
- opções do arquivo:
	- 'cachedir' guarda o caminho para o armazenamento de cache, que pode ser alterado, mas o padrão é '/var/cache/yum';
		- para limpar o cache, usa-se:
			```# yum clean packages``` em que 'packages' remove todos os pacotes, mas pode ser substituído pelo nome de um pacote específico ou por 'metadata', conforme convir.
	- 'keepcache' com valor 0 exclui os arquivos de cache; com valor 1, os mantém;
	- 'repodir' lista os dieretórios em que se encontram arquivos '\*.repo';
	- 'gpgcheck' determina se deve se fazer verificação de assinatura GPG dos pacotes;
- pode-se adicionar repositórios usando a ferramenta 'yum-config-manager', usando a sintaxe:
```# yum-config-manager --add-repo https://rpms.remirepo.net/enterprise/remi.repo```
- pode-se obter a lista de todos os repositórios com o comando:
```# yum repolist all```
- habilita-se um repositório com:
```# yum-config-manager --enable updates```

### DNF
- o dnf é um fork do yum, usado no Fedora, e equivale ao apt do Debian;
- muitas opções e parâmetros são os mesmos do 'yum': search, install, remove, info;
- __parâmetros e opções:__
	- 'upgrade' equivale ao 'update' do yum e ao 'upgrade' do apt;
	- 'provides' equivale ao 'whatprovides' do yum;
	- 'list --installed' equivale ao '-qa' do rpm;
	- 'repoquery' lista o conteúdo de um pacote;
	- 'repolist' lista todos os repositórios configurados;

- para adicionar um repositório:
```# dnf config-manager --add_repo URL``` em que URL é a URL completa do repositório;

### Zypper
- o zypper é a ferramenta de gerenciamento de pacotes OpenSUSE;
- __operadores, parâmetros e opções:__
	- 'refresh' atualiza metadados de pacotes; equivale ao 'update' do apt;
	- 'search' ou 'se' procura um pacote fornecido a seguir; 
		- com '-i', retorna se o pacote está instalado; sem fornecer o pacote, retorna todos os instalados no sistema;
		- com '--provides' retorna o pacote que contém um arquivo cujo nome ou caminho é fornecido;
	- 'install' ou 'in' instala um pacote; para instalar pacote baixado, fornecer o caminho na sequência;
	- 'update' atualiza os pacotes do sistema;
	- 'list-updates' retorna uma lista de atualizações disponíveis;
	- 'remove' ou 'rm' remove um pacote fornecido, incluindo pacotes que dependerem dele;
	- 'info' retorna dados a respeito de um pacote fornecido;
	- 'repos' exibe os repositórios configurados;
	- 'modifyrepo' permite administrar repositórios, com as opções:
		- '-e' habilita um repositório cujo alias listado com o operador 'repos' for fornecido;
		- '-d' desabilita um repositório conforme acima;
		- '-f' habilita o autorefresh, tornando a ação do operador 'refresh' automática;
		- '-F' desabilita o autorefresh;
	- 'addrepo' seguido da URL do repositório adiciona um repositório;
	- 'removerepo' seguido do alias do repositório o remove.