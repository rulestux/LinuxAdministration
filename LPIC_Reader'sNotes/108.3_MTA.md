## 108.3 MTA
__weight 3__

### MTAs
- os MTAs disponíveis para Linux são: Sendmail, Postfix, qmail, Exim.

### Sendmail
- serviço MTA \(Mail Transport Agent) que é configurado em '/etc/mail/sendmail.mc';

### nc
- utilitário simples para o Sendmail, que é intalado pelo pacote ncat ou nmap-ncat;
- a sintaxe de troca de emails com nc requer:
	- HELO domínio iniciador da troca
	- MAIL FROM: remetente@domínio
	- RCPT TO: destinatário@domínio
	- DATA subject e, pulada uma linha, o corpo do email; o final do corpo se sinaliza com um ponto numa linha separada;
	- QUIT encerra a conexão.
- o destinatário recebe uma sinalização de que tem um email no caminho '__/var/spool/mail/USERNAME__';

### sendmail
- comando que habilita uma forma mais amigável de troca de emails;
- a opção '-q' tenta reenviar a fila de emails para hosts anteriormente indisponíveis;

### mailq
- comando root que lista mensagens não entregues e a causa das falhas.

### /var/spool/
- diretório que contém caixas de entrada e saída para diferentes serviços de email, como Sendmail e Postfix.

### /home/user/.forward
- arquivo em que se pode inserir uma lista de emails, separados por vírgula, para os quais serão encaminhados as mensagens recebidas por um usuário.

### mail
- utilitário Unix, fornecido pelo pacote 'mailx', que serve de MUA \(Mail User Agent);
- as mensagens recebidas são listadas com um índice numérico, podendo ser lidas com o comando 'print N', em que 'N' e o número no índice inseridos no prompt do mail;
- comandos como print, delete, reply e quit podem ser substituídos por 'p', 'd', 'r' e 'q';
- inserir um destinatário após o comando habilita o modo de envio;
- exemplo de uso com '-s' para inserção de assunto \(subject) e hereline para o corpo: ```$ mail -s "Maintenance fail" henry@lab3.campus <<<"The maintenance script failed at `date`"```;
- se nenhum conteúdo é fornecido, o programa aguarda o corpo da mensagem cuja inserção se encerra com 'ctrl+D';
- __outras opções:__
	- '-a /PATH/TO/FILE' permite anexar um arquivo;
	- '-c' permite inserir um endereço para envio de cópia;
	- '-b' permite inserir um endereço para cópia oculta.

### /etc/aliases 
- arquivo com aliases úteis para grupos de destinatários;
- alias na coluna da esquerda e destinatário ou grupo à direita;
- o comando '__newaliases__' deve ser executado sempre que o arquivo for alterado.