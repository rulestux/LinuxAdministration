## 108.4 Printers
__weight 2__


### CUPS
- pilha de software para gerenciamento de impressoras: Common Unix Printing System.

### cupsd
- daemon do CUPS que gerencia o spool \(fila de espera) de impressões.

### /etc/cups/cupsd.conf
- arquivo de configuração do daemon do cups;
- neste arquivo se habilita a WebInterface com 'Yes', acessível por 'Listen localhost:631';
- __opções de configuração:__
	- 'AuthType Default' usa um prompt de autentcação básico para o root;
	- 'Require user @SYSTEM' indica que é necessário um usuário com privilégios para a operação; '@SYSTEM' pode ser substituído por '@groupname' ou usuários comuns;
	- 'Order deny,allow' semelhante ao Apache2: ação negada por padrão, a menos que usuário ou membro do grupo seja autenticado.

### /etc/printcap
- arquivo legado pelo protocolo LPD \(Line Printer Daemon); frequentemente é um symlink para '/run/cups/printcap'.

### /etc/cups/printers.conf
- arquivo que contém as impressoras configuradas para serem usadas pelo CUPS em blocos da tag ```<Printer></Printer>```.

### /var/log/cups/ 
- diretório de logs do cups, com os arquivos access_log, page_log e error_log.

### lpadmin
- comando legado para gerenciamento de impressão e adição de impressora;
- __opções:__
	- '-p' destino do trabalho de impressão \(nome da impressora);
	- '-L' define a localização física da impressora entre aspas;
	- '-v' define a URI do dispositivo;
	- '-E' habilita o dispositivo;
	- '-d' para fornecer o nome de uma impressora padrão;
	- '-D' para inserir uma descrição;
	- '-P' para inserir o caminho para o driver;
	- '-m' define o modelo da impressora, para o CUPS determinar o arquivo PPD para usar;
	- '-p PRINTER -o printer-is-shared=true' permite compartilhar uma impressora na rede;
	- '-p PRINTER -u allow:USER1,USER2,USER3' especifica usuários que podem executar trabalhos de impressão;
	- '-p PRINTER -u deny:USER' especifica usuário que não pode executar trabalhos de impressão; grupos podem ser inseridos com o uso de '@';
	- '-p FRONT-DESK -o printer-error-policy=retry-job' permite definir uma política de erro, como tentar novamente uma impressão; outras opções são:
		- 'abort-job'
		- 'stop-printer'
		- 'retry-current-job'
	'-x' seguido do nome da impressora remove uma impressora, semelhante ao '__cupsreject -r__'.

### lpinfo
- comando que lista os arquivos PPD instalados;
- a opção '-v' mostra mais detalhes;
- a opção '-m' exibe drivers.

### lpoptions -d PRINTER
- define uma impressora padrão, como o 'lpadmin -d'.

### lpstat
- comando que retorna impresoras disponíveis com a opção '-p';
- a opção '-t' exibe maiores detalhes;
- a opção '-v' exibe conexões usadas pelas impressoras;
- a opção '-d' exibe a impressora padrão.

### lpr
- 'Line Printer Remote' é o comando para imprimir um arquivo fornecido a seguir;
- a opção '-P' permite escolher a impressora para cuja fila enviar o arquivo;
- a opção '-o' habilita subopções de modo de impressão:
	- landscape: modo paisagem;
	- two-sided-long-edge: retrato duplex;
	- two-sided-short-edge: paisagem duplex;
	- media=: seguido de 'A4', 'Letter', 'Legal', 'DL', 'COM10' permite selecionar o tamanho do papel;
	- collate=: agrupa documento com os valores 'true' ou 'false';
	- page-ranges: permite selecionar páginas ou intervelo de páginas;
	- fit-to-page: redimensiona o arquivo para caber no papel;
	- outputorder=: imprime na ordem 'reverse' ou 'normal';
- '-#N' define o número de cópias com 'N'.

### lp
- versão mais simples do lpr.

### lpq
- comando que exibe a lista da fila de impressão;
- com a opção '-a', exibe-se a fila de todas as impressoras e o ID do trabalho na coluna 'Job';
- com a opção '-P' e uma impressora fornecida a seguir, exibe a fila de impressão respectiva.

### lprm JOB_ID
- comando que exclui um trabalho de impressão cujo ID de trabalho seja fornecido;
- a opção '-P' permite especificar a impressora pelo nome;
- um hífen '-' no lugar do ID exclui todos os trabalhos da impressora padrão;
- '__cancel__' é um comando alternativo do CUPS para a mesma finalidade, seguido do nome da impressora e do ID do trabalho, separados por um traço.

### lpmove
- comando que move um trabalho de uma fila de impressão para outra, ao se fornecerem o nome da impressora, o ID do trabalho após um traço e o nome da impressora destino após um espaço.

