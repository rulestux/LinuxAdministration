## 109.2 Network Configuration
__weight 4__


### ip
- comando que lista interfaces rede, com a sintaxe ```$ ip link show```;
- ver manual do ip para mais objetos e categorias do comando;
- seu equivalente é o __nmcli__: ```$ nmcli device```;
- ver mais em 109.3.

### /etc/network/interfaces
- arquivo que lista as interfaces de rede do sistema;
- '/etc/sysconfig/network-scripts/' é o diretório com arquivos individuais para as interfaces em sistemas como CentOS;
- interfaces físicas iniciadas por 'auto' estão habilitadas a serem acessadas com __ifup -a__ e são ativadas na inicialização pela ordem em que estão listadas;
- __ifdown__ seguido do nome da interface permite desativá-la; ativar com 'ifup' e a mesma sintaxe para ativar eventuais novas configurações em '/etc/network/interfaces';
- interfaces, identificadas após 'iface', podem ser habilitadas para 'dhcp' ou 'static' no campo 'inet'; caso 'static', seguem-se o IP após 'address' em uma linha e o IP do roteador iniciado por 'gateway' em outra linha.

### network.service
- serviço systemd que gerencia os recursos de rede.

### /etc/hostname
- arquivo cuja primeira linha não comentada com '#' é assumida como nome do host;
- o arquivo pode ser editado diretamente ou através do comando __hostnamectl__;

### hostname
- comando que ativa alterações em hostname, atualizando '/proc/sys/kernel/hostname', através da sintaxe:
 ```# hostname -b -F /etc/hostname```

### hostnamectl 
- comando para definir o hostname estático com: ```# hostnamectl set-hostname NEW_NAME```;
- além do hostname estático, pode-se definir:
	- hostname pretty: ```# hostnamectl --pretty set-hostname "LAN Shared Storage"```
	- hostname transiente: ```# hostnamectl --transient set-hostname generic-host```
- para definir apenas o hostname, usar a opção '--static'; 
- apenas o hostname etático fica armazenado em '/etc/hostname'.
- toda a configuração é exibida com ```$ hostnamectl status```;

### /etc/nsswitch.conf
- arquivo que define métodos de correspondências nome-IP; ver mais em 109.4.

### /etc/hosts
- arquivo com banco de dados de hosts e IPs, usado para a resolução de nomes;
- IP na primeira coluna, hostname \(que responde a 'hostname -d') na segunda e um apelido opcional \(que responde a 'hostname -s') na terceira.

### /etc/resolv.conf
- arquivo que contém as diretrizes para o método 'resolver', contendo entradas como 'nameserver', para definir o servidor DNS entrando seu IP em seguida, 'domain', para definir o domínio local,  e 'search', para uma lista de domínios; ver mais em 109.4.

### nmcli
- utilitário de linha de comando, equivalente ao 'nmtui', que permite configurar o daemon do NetworkManager;
- __categorias ou objetos do nmcli:__
	- general: status e operações gerais do NetworkManager:
		- STATE: coluna do status da conexão;
		- CONNECTIVITY: 
			- full para ok, 
			- Portal para necessidade de autenticação;
		- WIFI e WWAN: redes sem fio; o sufixo HW diz respeito ao dispositivo;
	- networking: controle de rede;
	- radio: controle de rádio;
		- ```$ nmcli radio wifi off``` permite desligar um dispositivo wi-fi para economia de energia;
		- ```$ nmcli radio wifi on``` permite religar;
	- device: dispositivos gerenciados;
		- ```$ nmcli device wifi list```: lista as redes sem fio disponíveis, com o SSID da rede para conexão;
		- ```$ nmcli device wifi connect SSID_NAME```: conecta à rede abrindo uma caixa de diálogo no modo gráfico para a inserção da senha; em modo texto exclusivamente, a senha pode ser inserida na mesma linha do comando, com a sintaxe: ```$ nmcli device wifi connect SSID_NAME password PASSWORD```;
		- ifname pode ser adicionado ao final para a seguir fornecer o nome de um dispositivo escolhido, caso haja mais de um;
	- connection: conexões;
		- ```$ nmcli connection down SSID_NAME``` desativa uma conexão;
		- ```$ nmcli connection up SSID_NAME``` ativa uma conexão;
		- o nome de um dispositivo pode ser usado para restabelecer uma conexão;
	- agent: agente polkit;
	- monitor: monitor das mudanças no daemon.

### systemd-networkd
- daemon systemd para gerenciar a conectividade de rede;
- os diretórios de configuração são: 
	- '/lib/systemd/network/' diretório de rede do sistema;
	- '/run/systemd/network/' diretório volátil de tempo de execução;
	- '/etc/systemd/network/' diretório local de administração; maior prioridade;
- os arquivos podem terminar por:
	- .netdev para criar dispositivos de rede virtuais bridge ou tun;
	- .link para configurações de baixo nível de uma interface de rede correspondente;
	- .network para configurar entereços de rede e rotas, sendo os mais importantes;
- os arquivos contém:
	- \[Match] campo que define as regras para um dispositivo fornecido por seu:
		- Name=NAME
		- MACAddress=MAC:ADDRESS
	- \[Network] define configurações como IP:
		- Address=192.168.0.100/24
		- Gateway=192.168.0.1
	- ou IP dinâmico:
		- DHCP=yes

### WPA supplicant
- programa systemd para configuração de rede sem fio.

### systemd-resolution
- daemon systemd para gerenciar resolução de nome local.

### route
- comando que retorna uma tabela de dados de rotas da rede local; ver mais em 109.3.